{% extends "base.html" %}

{% block title %}Pre-Site Visit Checklist{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row mb-4 align-items-center">
        <div class="col">
            <h1>Pre-Site Visit Checklist</h1>
        </div>
        <div class="col-auto">
            <a href="{{ url_for('index') }}" class="btn btn-outline-primary">
                <i class="bi bi-arrow-left"></i> Back to Home
            </a>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="card shadow-lg">
                <div class="card-header bg-primary text-white">
                    <h2 class="mb-0">
                        <i class="bi bi-clipboard-check me-2"></i>
                        Pre-Site Visit Checklist
                    </h2>
                </div>
                <div class="card-body">
                    <div class="alert alert-info" role="alert">
                        <h4 class="alert-heading">Purpose</h4>
                        <p>This checklist ensures comprehensive preparation for the on-site evaluation of the LoRaWAN-based worker tracking system in Sabah's oil palm estates.</p>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h5 class="text-primary">
                                <i class="bi bi-tools me-2"></i>
                                Equipment Verification
                            </h5>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="dragino-trackers">
                                    <label class="form-check-label" for="dragino-trackers">
                                        Dragino Tracker D LoRaWAN GPS Trackers
                                        <small class="text-muted d-block">Fully charged, firmware updated</small>
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="dragino-gateway">
                                    <label class="form-check-label" for="dragino-gateway">
                                        Dragino Outdoor Gateway DL0S86
                                        <small class="text-muted d-block">4G SIM installed, antenna connected</small>
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="laptop">
                                    <label class="form-check-label" for="laptop">
                                        Laptop
                                        <small class="text-muted d-block">Fully charged, software installed</small>
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="gps-device">
                                    <label class="form-check-label" for="gps-device">
                                        High-Accuracy GPS Device
                                        <small class="text-muted d-block">Garmin GPSMAP 66i or equivalent</small>
                                    </label>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-primary">
                                <i class="bi bi-phone me-2"></i>
                                Signal Measurement Tools
                            </h5>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="signal-meter">
                                    <label class="form-check-label" for="signal-meter">
                                        Cellular Signal Strength Meter
                                        <small class="text-muted d-block">RF Explorer or mobile app</small>
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="mobile-apps">
                                    <label class="form-check-label" for="mobile-apps">
                                        Signal Measurement Apps
                                        <small class="text-muted d-block">OpenSignal, Network Cell Info Lite</small>
                                    </label>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h5 class="text-primary">
                                <i class="bi bi-geo-alt me-2"></i>
                                Site Preparation
                            </h5>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="estate-contact">
                                    <label class="form-check-label" for="estate-contact">
                                        Estate Contact Person
                                        <small class="text-muted d-block">Name, contact details confirmed</small>
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="site-permissions">
                                    <label class="form-check-label" for="site-permissions">
                                        Site Access Permissions
                                        <small class="text-muted d-block">Written authorization obtained</small>
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="estate-map">
                                    <label class="form-check-label" for="estate-map">
                                        Estate Map
                                        <small class="text-muted d-block">Terrain details, potential obstacles</small>
                                    </label>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-primary">
                                <i class="bi bi-shield-check me-2"></i>
                                Safety Considerations
                            </h5>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="safety-briefing">
                                    <label class="form-check-label" for="safety-briefing">
                                        Team Safety Briefing
                                        <small class="text-muted d-block">Hazards, emergency procedures</small>
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="first-aid">
                                    <label class="form-check-label" for="first-aid">
                                        First Aid Kit
                                        <small class="text-muted d-block">Fully stocked, easily accessible</small>
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input me-2" type="checkbox" id="backup-equipment">
                                    <label class="form-check-label" for="backup-equipment">
                                        Backup Equipment
                                        <small class="text-muted d-block">Spare trackers, batteries</small>
                                    </label>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="alert alert-warning" role="alert">
                        <h4 class="alert-heading">Important Reminders</h4>
                        <ul class="mb-0">
                            <li>Verify all equipment functionality before departure</li>
                            <li>Maintain clear communication with estate management</li>
                            <li>Document all observations and test results meticulously</li>
                        </ul>
                    </div>

                    <div class="alert alert-info" role="alert">
                        <h4 class="alert-heading">Report Information</h4>
                        <p><strong>Report prepared for:</strong> TEQ Armada Sdn Bhd</p>
                        <p><strong>Date:</strong> December 15, 2024</p>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">1. Introduction</h4>
                        <p>This report outlines the necessary preparations and verifications to be performed before conducting the on-site evaluation of the LoRaWAN-based worker tracking system in the selected oil palm estate. The objective is to ensure all necessary tools, equipment, and information are prepared and in working order for a smooth and efficient evaluation process.</p>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">2. Equipment and Tools</h4>
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Model (Example)</th>
                                        <th>Verification</th>
                                        <th>Notes</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Dragino Tracker D LoRaWAN GPS trackers</td>
                                        <td>Dragino Tracker D</td>
                                        <td>
                                            <ul>
                                                <li>Devices are fully charged</li>
                                                <li>Device firmware is up-to-date</li>
                                                <li>Device configurations are set correctly</li>
                                            </ul>
                                        </td>
                                        <td>Multiple trackers are recommended for comprehensive testing</td>
                                    </tr>
                                    <tr>
                                        <td>Dragino Outdoor Gateway DL0S86 (AS923) with 4G EC25</td>
                                        <td>Dragino DL0S86</td>
                                        <td>
                                            <ul>
                                                <li>Gateway is configured correctly</li>
                                                <li>4G SIM card with sufficient data is installed and activated</li>
                                                <li>Antenna is connected securely</li>
                                            </ul>
                                        </td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Laptop</td>
                                        <td>Any suitable laptop</td>
                                        <td>
                                            <ul>
                                                <li>Laptop is fully charged</li>
                                                <li>LoRaWAN network server software is installed and configured</li>
                                                <li>Mapping software is installed</li>
                                                <li>Necessary drivers and connectors are available</li>
                                            </ul>
                                        </td>
                                        <td>Contact the supplier of the chosen LoRaWAN network server software for recommendations</td>
                                    </tr>
                                    <tr>
                                        <td>High-accuracy GPS device</td>
                                        <td>Garmin GPSMAP 66i</td>
                                        <td>
                                            <ul>
                                                <li>Device is fully charged</li>
                                                <li>Device settings are configured correctly</li>
                                            </ul>
                                        </td>
                                        <td>Alternatively, use a detailed map of the estate with sufficient accuracy</td>
                                    </tr>
                                    <tr>
                                        <td>Cellular signal strength meter</td>
                                        <td>RF Explorer Handheld Spectrum Analyzer</td>
                                        <td>
                                            <ul>
                                                <li>Device is calibrated and functioning correctly</li>
                                                <li>Device is compatible with Malaysian cellular frequencies</li>
                                            </ul>
                                        </td>
                                        <td>Alternatively, use a mobile phone with field test mode</td>
                                    </tr>
                                    <tr>
                                        <td>Measuring tape or laser distance measuring equipment</td>
                                        <td>Bosch GLM 50 C</td>
                                        <td>Device is functioning correctly and batteries are installed</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Tools for mounting the gateway</td>
                                        <td>Ladder, mounting brackets, tools</td>
                                        <td>Ensure you have the appropriate tools for the chosen mounting surface</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>Power bank (optional)</td>
                                        <td>Any suitable power bank</td>
                                        <td>Power bank is fully charged</td>
                                        <td>For charging devices in the field</td>
                                    </tr>
                                    <tr>
                                        <td>First-aid kit</td>
                                        <td></td>
                                        <td>Kit is well-stocked with essential supplies</td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">3. Software Verification</h4>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <strong>LoRaWAN Network Server:</strong> Ensure the network server is accessible and configured correctly. Test the connection with the Dragino DL0S86 gateway.
                            </li>
                            <li class="list-group-item">
                                <strong>Mapping Software:</strong> Familiarize yourself with the mapping software and ensure you can import and visualize GPS data.
                            </li>
                            <li class="list-group-item">
                                <strong>Cellular Signal Strength Measurement:</strong> If using a mobile phone, download and test a signal strength measurement app.
                            </li>
                        </ul>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">4. Site Information</h4>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <strong>Estate Selection:</strong> Choose the estate for testing and gather relevant information (e.g., maps, terrain details, potential obstacles).
                            </li>
                            <li class="list-group-item">
                                <strong>Contact Person:</strong> Establish contact with a person on-site for access and assistance during the evaluation.
                            </li>
                            <li class="list-group-item">
                                <strong>Permissions:</strong> Obtain any necessary permissions for accessing and installing equipment on the estate.
                            </li>
                        </ul>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">5. Safety Briefing</h4>
                        <p>Conduct a safety briefing with the evaluation team to discuss potential hazards and safety procedures in the plantation environment.</p>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">6. Data Collection Preparation</h4>
                        <ul class="list-group">
                            <li class="list-group-item">Prepare data collection forms for each test, ensuring all necessary fields are included.</li>
                            <li class="list-group-item">Familiarize yourself with the data recording procedures and ensure all team members understand their roles.</li>
                        </ul>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">7. Contingency Planning</h4>
                        <ul class="list-group">
                            <li class="list-group-item">Have backup equipment and tools available in case of any malfunctions.</li>
                            <li class="list-group-item">Develop a plan for dealing with unexpected weather conditions or other potential disruptions.</li>
                        </ul>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">8. Mobile Phones with Field Test Mode and Signal Strength Measurement Apps</h4>
                        
                        <h5 class="mt-3">For iPhones:</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <strong>Field Test Mode:</strong> Access by dialing *3001#12345#*
                                <br>
                                <small class="text-muted">Note that not all iPhones provide RSRP measurements due to carrier and chipset compatibility.</small>
                            </li>
                            <li class="list-group-item">
                                <strong>Apps:</strong>
                                <ul>
                                    <li>weBoost App: Provides a signal meter and field test mode instructions</li>
                                    <li>OpenSignal: A reliable speed test tool with coverage maps</li>
                                </ul>
                            </li>
                        </ul>

                        <h5 class="mt-3">For Android:</h5>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <strong>Field Test Mode:</strong> Access varies by phone model and OS version, usually found under Settings
                            </li>
                            <li class="list-group-item">
                                <strong>Apps:</strong>
                                <ul>
                                    <li>Network Cell Info Lite: Provides a signal meter, network information, and cell tower locations</li>
                                    <li>SignalStream: Shows field test information and allows sharing readings with signal specialists</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">9. Conclusion</h4>
                        <p>By diligently completing this checklist, the evaluation team can ensure a well-prepared and successful on-site evaluation of the LoRaWAN-based worker tracking system. This will contribute to a comprehensive understanding of the system's feasibility and performance in the oil palm plantation environment.</p>
                    </div>

                    <div class="mb-4">
                        <h4 class="text-primary">Works cited</h4>
                        <ol class="list-group list-group-numbered">
                            <li class="list-group-item">Academy for LoRaWAN, accessed on December 15, 2024, <a href="https://learn.semtech.com/" target="_blank">https://learn.semtech.com/</a></li>
                            <li class="list-group-item">RAK7289 LoRaWAN Network Server Guide - RAKwireless Documentation Center, accessed on December 15, 2024, <a href="https://docs.rakwireless.com/product-categories/wisgate/rak7289/lorawan-network-server-guide" target="_blank">https://docs.rakwireless.com/product-categories/wisgate/rak7289/lorawan-network-server-guide</a></li>
                            <li class="list-group-item">Course: How to Build & Deploy a Network Using the LoRaWAN® Protocol, accessed on December 15, 2024, <a href="https://learn.semtech.com/course/view.php?id=17" target="_blank">https://learn.semtech.com/course/view.php?id=17</a></li>
                            <li class="list-group-item">Field Test Mode For iPhones and Android - Waveform, accessed on December 15, 2024, <a href="https://www.waveform.com/a/b/guides/field-test-guide" target="_blank">https://www.waveform.com/a/b/guides/field-test-guide</a></li>
                        </ol>
                    </div>

                    <div class="text-center mt-4">
                        <a href="{{ url_for('index') }}" class="btn btn-secondary me-2">
                            <i class="bi bi-arrow-left me-2"></i>Back to Home
                        </a>
                        <button onclick="window.print()" class="btn btn-primary">
                            <i class="bi bi-printer me-2"></i>Print Checklist
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkboxes = document.querySelectorAll('.form-check-input');
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                this.parentElement.classList.toggle('list-group-item-success', this.checked);
            });
        });
    });
</script>
{% endblock %}
